<html>
	<body>
		This is the body of index3.html
		<a id="liveagent_button_online_5732C000000CaZf" 
		   href="javascript://Chat" 
		   style="display: none;"
		   onclick="liveagent.startChat('5732C000000CaZf')">
			Click to Chat
		</a>
		<div id="liveagent_button_offline_5732C000000CaZf" style="display: none;">
			Chat is not available
		</div>
		<script type="text/javascript">
			if (!window._laq) {
				window._laq = [];
			}
			window._laq.push(function(){
				liveagent.showWhenOnline('5732C000000CaZf',
							 document.getElementById('liveagent_button_online_5732C000000CaZf'));
				liveagent.showWhenOffline('5732C000000CaZf',
							  document.getElementById('liveagent_button_offline_5732C000000CaZf'));
			});
		</script>
		<script type='text/javascript'
			src='https://c.la1-c1cs-dfw.salesforceliveagent.com/content/g/js/43.0/deployment.js'>
		</script>
		<script type='text/javascript'>
		
			var firstName = 'John';
			var lastName = 'Doe';
			var EID = 'R80M1221M'
			var typeClient = 'Business Client'
			var finalEID = EID + typeClient;
			var date = new Date();
			var token = EID + date;
			console.log(token);
			var name = firstName + ' ' + lastName;
			
			liveagent.enableLogging();
			liveagent.addCustomDetail('LiveChatTranscriptRecordType', '0122C000000LCmnQAG', true);
			liveagent.addCustomDetail('CaseRecordType', '012180000008r0EAAQ'); 
			liveagent.addCustomDetail('EnterpriseID', finalEID, true);
			liveagent.addCustomDetail('ContractNumber', '617148', true);
			liveagent.addCustomDetail('Contact E-mail', 'johndoe@gmail.com');
			liveagent.addCustomDetail('First Name', firstName, true);
			liveagent.addCustomDetail('Last Name', lastName, true);
			liveagent.addCustomDetail('ChatRecordType', 'FSA_SponsorChat', true);
			liveagent.addCustomDetail('Token', token, true);
			liveagent.addCustomDetail('Phone Number', '312-555-1212', true);
			liveagent.addCustomDetail('CaseOrigin', 'Chat', true);
			liveagent.addCustomDetail('CaseSubject', 'Unbundled Page 3', true);
			liveagent.addCustomDetail('CaseTopic', 'SSC', true);
			liveagent.addCustomDetail('ChatDeployment', '5722C0000004CR2', true);
			
			liveagent.findOrCreate('Case')
				.map('RecordType', 'CaseRecordType', false, false, true)
				.map('Origin', 'CaseOrigin', false, false, true)
				.map('Subject', 'CaseSubject', false, false, true)
				.map('Topic__c', 'CaseTopic', false, false, true)
				.saveToTranscript('CaseId')
				.showOnCreate();
			
			liveagent.findOrCreate('ChatToken__c')
				.map('Visitor_Token__c', 'Token', false, false, true)
				.map('Deployment_Key_Setting__c', 'ChatDeployment', false, false, true)
				.map('Contact__c', 'Contact', false, false, true)
				.saveToTranscript('ChatToken__c');
			
			liveagent.findOrCreate('Contact')
				.map('Contact_Distinct_ID__c', 'EnterpriseID', true, true, false)
				.saveToTranscript('ContactId')
				.showOnCreate()
				.linkToEntity('ChatToken__c', 'Contact__c')
				.linkToEntity('Case', 'ContactId');
			
			liveagent.findOrCreate('Contract')
				.map('Contract_Source_ID__c','ContractNumber',true,true,false)
				.saveToTranscript('Chat_Contract__c')
				.showOnCreate()
				.linkToEntity('Case', 'vlocity_ins__ContractId__c');
			
			liveagent.setName(name);
			liveagent.setChatWindowWidth(500);
			liveagent.setChatWindowHeight(500);
			liveagent.init('https://d.la1-c1cs-dfw.salesforceliveagent.com/chat', '5722C0000004CR2', '00D2C0000000qaR');
		</script>
	</body>
</html>
